<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #1c1c1e; color: white; font-family: -apple-system, sans-serif; display: flex; justify-content: center; padding: 20px; }
        .card { width: 100%; max-width: 350px; background: rgba(255,255,255,0.05); padding: 25px; border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        h2 { margin-top: 0; color: #0088cc; }
        .input-group { margin-bottom: 15px; text-align: left; }
        label { font-size: 12px; color: #8e8e93; margin-left: 5px; }
        input { width: 100%; padding: 12px; margin-top: 5px; border-radius: 12px; border: 1px solid #3a3a3c; background: #2c2c2e; color: white; box-sizing: border-box; }
        .btn { width: 100%; padding: 15px; background: #0088cc; border: none; border-radius: 12px; color: white; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .info { font-size: 11px; color: #8e8e93; margin-top: 15px; }
        a { color: #0088cc; text-decoration: none; }
    </style>
</head>
<body>
    <div class="card">
        <h2>Spy System</h2>
        <div class="input-group">
            <label>ID –ö–ê–ù–ê–õ–ê-–î–û–ù–û–†–ê</label>
            <input type="text" id="donorId" placeholder="-1001234567890">
        </div>
        <div class="input-group">
            <label>ID –í–ê–®–ï–ì–û –ö–ê–ù–ê–õ–ê</label>
            <input type="text" id="targetId" placeholder="-1000987654321">
        </div>
        <button class="btn" onclick="sendData()">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å —à–ø–∏–æ–Ω–∞</button>
        <div class="info">
            –£–∑–Ω–∞—Ç—å ID –º–æ–∂–Ω–æ –≤ <a href="https://t.me/RawDataBot" target="_blank">@RawDataBot</a>.<br>
            –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≤ –≤–∞—à–µ–º –∫–∞–Ω–∞–ª–µ!
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.setText("–ó–ê–ö–†–´–¢–¨ –ü–†–ò–õ–û–ñ–ï–ù–ò–ï");
        tg.MainButton.hide();

        async function sendData() {
            const donorId = document.getElementById('donorId').value;
            const targetId = document.getElementById('targetId').value;

            if (!donorId || !targetId) {
                tg.showAlert("–û—à–∏–±–∫–∞: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±–∞ ID!");
                return;
            }

            const payload = {
                userId: tg.initDataUnsafe.user?.id,
                donorId: donorId,
                targetId: targetId
            };

            try {
                // –ó–∞–º–µ–Ω–∏ URL –Ω–∞ –∞–¥—Ä–µ—Å —Å–≤–æ–µ–≥–æ —Ç—É–Ω–Ω–µ–ª—è!
                const response = await fetch('https://—Ç–≤–æ–π-—Ç—É–Ω–Ω–µ–ª—å.lhr.life/api/setup-spy', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'Bypass-Tunnel-Reminder': 'true' 
                    },
                    body: JSON.stringify(payload)
                });

                if (response.ok) {
                    tg.showConfirm("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã! –ó–∞–ø—É—Å—Ç–∏—Ç—å —à–ø–∏–æ–Ω–∞?", (ok) => {
                        if (ok) tg.close();
                    });
                } else {
                    tg.showAlert("–°–µ—Ä–≤–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω");
                }
            } catch (e) {
                tg.showAlert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç—É–Ω–Ω–µ–ª—å!");
            }
        }
    </script>
</body>
</html>